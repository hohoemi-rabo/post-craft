# チケット #30: 投稿タイプ一覧 UI

> Phase 3 | 優先度: 高 | 依存: #26, #28, #29

## 概要

投稿タイプの一覧表示ページ（`/settings/post-types`）を実装する。有効/無効切り替え、削除、複製、ドラッグ&ドロップ並び替えを含む。

SPEC-PHASE3.md セクション 8.3 に準拠。

## 対象ファイル

| ファイル | 操作 |
|---------|------|
| `src/app/(dashboard)/settings/post-types/page.tsx` | 新規作成 |
| `src/components/settings/post-type-list.tsx` | 新規作成 |

## 画面仕様

### 一覧表示

各タイプカード:
- ドラッグハンドル（≡アイコン）
- アイコン + タイプ名
- 説明文
- 文字数範囲（例: 200〜300文字）+ 変数個数
- [編集] [複製] [削除] ボタン
- [有効/無効] トグル

### ヘッダー
- パンくず: `⚙️ 設定 > 📝 投稿タイプ管理`
- 説明文
- [+ 新規作成] ボタン（上限到達時は無効化）

### フッター
- 使用状況: `📊 N / 10 タイプ使用中`

### 操作

| 操作 | 動作 |
|------|------|
| 新規作成 | `/settings/post-types/new` へ遷移 |
| 編集 | `/settings/post-types/[id]` へ遷移 |
| 複製 | API呼び出し → 一覧を再取得 |
| 削除 | 確認モーダル表示 → API呼び出し |
| 並び替え | ドラッグ&ドロップ → API呼び出し |
| 有効/無効 | 即座にAPI呼び出し |

### 削除確認モーダル

使用中の投稿がある場合:
```
このタイプを使用している投稿が N 件あります。
削除すると、これらの投稿のタイプ情報が失われます。
本当に削除しますか？
[キャンセル] [削除する]
```

### ドラッグ&ドロップ

- HTML Drag and Drop API で実装（外部ライブラリ不要を推奨）
- ドロップ時に `PUT /api/post-types/reorder` を呼び出し
- 並び替え中のビジュアルフィードバック

## 受入条件

- 全投稿タイプが一覧表示される
- 有効/無効の切り替えが即座に反映される
- ドラッグ&ドロップで並び替えが動作し、リロード後も維持される
- 削除時に確認モーダルが表示され、使用中投稿数が正しい
- 上限10個到達時に「新規作成」ボタンが無効化される
- ローディングスケルトンが表示される
- モバイルでも操作可能

## TODO

- [ ] `src/app/(dashboard)/settings/post-types/page.tsx` を作成
- [ ] `src/components/settings/post-type-list.tsx` を作成
  - [ ] タイプカードの表示（アイコン、名前、説明、文字数、変数数）
  - [ ] [編集] ボタン → ページ遷移
  - [ ] [複製] ボタン → API呼び出し + 一覧更新
  - [ ] [削除] ボタン → 確認モーダル + API呼び出し
  - [ ] 有効/無効トグル → 即時API更新
  - [ ] 使用状況カウンター（N / 10）
  - [ ] ローディングスケルトン
- [ ] ドラッグ&ドロップ並び替えを実装
- [ ] 削除確認モーダルを実装（使用中投稿数表示）
- [ ] 上限到達時の「新規作成」ボタン無効化
- [ ] モバイル対応の確認
